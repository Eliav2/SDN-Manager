(this["webpackJsonpreact-xarrows-examples"]=this["webpackJsonpreact-xarrows-examples"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},111:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),i=(n(99),n(7)),c=(n(100),n(17)),l=n(3),s=n(84),u=n.n(s),d=(n(101),n(50)),p=r.a.memo((function(e){var t=e.line,n=Object(a.useContext)(_e),o=Object(a.useState)({color:t.color}),c=Object(i.a)(o,2),s=c[0],u=c[1],p={consoleWarning:!1,passProps:{onMouseEnter:function(){return u({color:"IndianRed"})},onMouseLeave:function(){return u({color:t.color})},onClick:function(e){e.stopPropagation(),n.setSelected({id:{start:t.start,end:t.end},shape:"arrow"}),n.setActionState("Normal")},cursor:"pointer"}},f=s.color,m=t.start.includes(":<input>")?"right":"auto",b=t.end.includes(":<output>")?"left":"auto";return n.selected&&"arrow"===n.selected.shape&&n.selected.id.start===t.start&&n.selected.id.end===t.end&&(f="red"),r.a.createElement(d.a,Object.assign({startAnchor:m,endAnchor:b},Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},p),t),s),{},{color:f})))}),(function(){return!1})),f=n(36),m=n.n(f),b=n(156),h=n(159),v=n(56),E=n.n(v),O=n(77),y=n.n(O),g=n(76),_=n.n(g),x=[["in_port","Switch input port (int)",'{"in_port": 7}'],["in_phy_port","Switch physical input port (int)",'{"in_phy_port": 5, "in_port": 3}'],["metadata","Metadata passed between tables (int or string)",'{"metadata": 12345} or {"metadata": "0x1212/0xffff"}'],["eth_src","Ethernet source address (string)",'{"eth_src": "aa:bb:cc:11:22:33"}'],["dl_src","Ethernet source address (string)",'{"eth_src": "aa:bb:cc:11:22:33"}'],["eth_dst","Ethernet destination address (string)",'{"eth_dst": "aa:bb:cc:11:22:33/00:00:00:00:ff:ff"}'],["dl_dst","Ethernet destination address (string)",'{"eth_dst": "aa:bb:cc:11:22:33/00:00:00:00:ff:ff"}'],["eth_type","Ethernet frame type (int)",'{"eth_type": 2048}'],["dl_type","Ethernet frame type (int)",'{"eth_type": 2048}'],["vlan_vid","VLAN id (int or string)","See Example of VLAN ID match field"],["vlan_pcp","VLAN priority (int)",'{"vlan_pcp": 3, "vlan_vid": 3}'],["ip_dscp","IP DSCP (6 bits in ToS field) (int)",'{"ip_dscp": 3, "eth_type": 2048}'],["ip_ecn","IP ECN (2 bits in ToS field) (int)",'{"ip_ecn": 0, "eth_type": 34525}'],["ip_proto","IP protocol (int)",'{"ip_proto": 5, "eth_type": 34525}'],["ipv4_src","IPv4 source address (string)",'{"ipv4_src": "192.168.0.1", "eth_type": 2048}'],["ipv4_dst","IPv4 destination address (string)",'{"ipv4_dst": "192.168.10.10/255.255.255.0", "eth_type": 2048}'],["tcp_src","TCP source port (int)",'{"tcp_src": 3, "ip_proto": 6, "eth_type": 2048}'],["tcp_dst","TCP destination port (int)",'{"tcp_dst": 5, "ip_proto": 6, "eth_type": 2048}'],["udp_src","UDP source port (int)",'{"udp_src": 2, "ip_proto": 17, "eth_type": 2048}'],["udp_dst","UDP destination port (int)",'{"udp_dst": 6, "ip_proto": 17, "eth_type": 2048}'],["sctp_src","SCTP source port (int)",'{"sctp_src": 99, "ip_proto": 132, "eth_type": 2048}'],["sctp_dst","SCTP destination port (int)",'{"sctp_dst": 99, "ip_proto": 132, "eth_type": 2048}'],["icmpv4_type","ICMP type (int)",'{"icmpv4_type": 5, "ip_proto": 1, "eth_type": 2048}'],["icmpv4_code","ICMP code (int)",'{"icmpv4_code": 6, "ip_proto": 1, "eth_type": 2048}'],["arp_op","ARP opcode (int)",'{"arp_op": 3, "eth_type": 2054}'],["arp_spa","ARP source IPv4 address (string)",'{"arp_spa": "192.168.0.11", "eth_type": 2054}'],["arp_tpa","ARP target IPv4 address (string)",'{"arp_tpa": "192.168.0.44/24", "eth_type": 2054}'],["arp_sha","ARP source hardware address (string)",'{"arp_sha": "aa:bb:cc:11:22:33", "eth_type": 2054}'],["arp_tha","ARP target hardware address (string)",'{"arp_tha": "aa:bb:cc:11:22:33/00:00:00:00:ff:ff", "eth_type": 2054}'],["ipv6_src","IPv6 source address (string)",'{"ipv6_src": "2001::aaaa:bbbb:cccc:1111", "eth_type": 34525}'],["ipv6_dst","IPv6 destination address (string)",'{"ipv6_dst": "2001::ffff:cccc:bbbb:1111/64", "eth_type": 34525}'],["ipv6_flabel","IPv6 Flow Label (int)",'{"ipv6_flabel": 2, "eth_type": 34525}'],["icmpv6_type","ICMPv6 type (int)",'{"icmpv6_type": 3, "ip_proto": 58, "eth_type": 34525}'],["icmpv6_code","ICMPv6 code (int)",'{"icmpv6_code": 4, "ip_proto": 58, "eth_type": 34525}'],["ipv6_nd_target","Target address for Neighbor Discovery (string)",'{"ipv6_nd_target": "2001::ffff:cccc:bbbb:1111", "icmpv6_type": 135, "ip_proto": 58, "eth_type": 34525}'],["ipv6_nd_sll","Source link-layer for Neighbor Discovery (string)",'{"ipv6_nd_sll": "aa:bb:cc:11:22:33", "icmpv6_type": 135, "ip_proto": 58, "eth_type": 34525}'],["ipv6_nd_tll","Target link-layer for Neighbor Discovery (string)",'{"ipv6_nd_tll": "aa:bb:cc:11:22:33", "icmpv6_type": 136, "ip_proto": 58, "eth_type": 34525}'],["mpls_label","MPLS label (int)",'{"mpls_label": 3, "eth_type": 34888}'],["mpls_tc","MPLS Traffic Class (int)",'{"mpls_tc": 2, "eth_type": 34888}'],["mpls_bos","MPLS BoS bit (int) (Openflow1.3+)",'{"mpls_bos": 1, "eth_type": 34888}'],["pbb_isid","PBB I-SID (int or string) (Openflow1.3+)",'{"pbb_isid": 5, "eth_type": 35047} or{"pbb_isid": "0x05/0xff", "eth_type": 35047}'],["tunnel_id","Logical Port Metadata (int or string) (Openflow1.3+)",'{"tunnel_id": 7} or {"tunnel_id": "0x07/0xff"}'],["ipv6_exthdr","IPv6 Extension Header pseudo-field (int or string) (Openflow1.3+)",'{"ipv6_exthdr": 3, "eth_type": 34525} or {"ipv6_exthdr": "0x40/0x1F0", "eth_type": 34525}']],S=[["OUTPUT",'Output packet from "port"','{"type": "OUTPUT", "port": 3}'],["COPY_TTL_OUT","Copy TTL outwards",'{"type": "COPY_TTL_OUT"}'],["COPY_TTL_IN","Copy TTL inwards",'{"type": "COPY_TTL_IN"}'],["SET_MPLS_TTL",'Set MPLS TTL using "mpls_ttl"','{"type": "SET_MPLS_TTL", "mpls_ttl": 64}'],["DEC_MPLS_TTL","Decrement MPLS TTL",'{"type": "DEC_MPLS_TTL"}'],["PUSH_VLAN",'Push a new VLAN tag with "ethertype"','{"type": "PUSH_VLAN", "ethertype": 33024}'],["POP_VLAN","Pop the outer VLAN tag",'{"type": "POP_VLAN"}'],["PUSH_MPLS",'Push a new MPLS tag with "ethertype"','{"type": "PUSH_MPLS", "ethertype": 34887}'],["POP_MPLS",'Pop the outer MPLS tag with "ethertype"','{"type": "POP_MPLS", "ethertype": 2054}'],["SET_QUEUE",'Set queue id using "queue_id" when outputting to a port','{"type": "SET_QUEUE", "queue_id": 7}'],["GROUP",'Apply group identified by "group_id"','{"type": "GROUP", "group_id": 5}'],["SET_NW_TTL",'Set IP TTL using "nw_ttl"','{"type": "SET_NW_TTL", "nw_ttl": 64}'],["DEC_NW_TTL","Decrement IP TTL",'{"type": "DEC_NW_TTL"}'],["SET_FIELD",'Set a "field" using "value" (The set of keywords available for "field" is the same as match field)',"See Example of set-field action"],["PUSH_PBB",'Push a new PBB service tag with "ethertype" (Openflow1.3+)','{"type": "PUSH_PBB", "ethertype": 35047}'],["POP_PBB","Pop the outer PBB service tag (Openflow1.3+)",'{"type": "POP_PBB"}'],["EXPERIMENTER",'Extensible action for the experimenter (Set "base64" or "ascii" to "data_type" field)','{"type": "EXPERIMENTER", "experimenter": 101, "data": "AAECAwQFBgc=", "data_type": "base64"}'],["GOTO_TABLE",'(Instruction) Setup the next table identified by "table_id"','{"type": "GOTO_TABLE", "table_id": 8}'],["WRITE_METADATA",'(Instruction) Setup the metadata field using "metadata" and "metadata_mask"','{"type": "WRITE_METADATA", "metadata": 0x3, "metadata_mask": 0x3}'],["METER",'(Instruction) Apply meter identified by "meter_id" (deprecated in Openflow1.5)','{"type": "METER", "meter_id": 3}'],["WRITE_ACTIONS","(Instruction) Write the action(s) onto the datapath action set",'{"type": "WRITE_ACTIONS", actions":[{"type":"POP_VLAN",},{ "type":"OUTPUT", "port": 2}]}'],["CLEAR_ACTIONS","(Instruction) Clears all actions from the datapath action set",'{"type": "CLEAR_ACTIONS"}']],w=n(14),j=n.n(w),C=n(152),P=n(30),T=n(58),N=n(71),k=n.n(N),B=function(e){var t=e.handleAddField,n=e.fields,o=(e.secName,Object(a.useState)("")),c=Object(i.a)(o,2),l=c[0],s=c[1];return n=n?l?n.filter((function(e){return e[0].includes(l)})):n:[],r.a.createElement(T.a,{trigger:r.a.createElement("div",{className:"button addButton"},r.a.createElement(k.a,{fontSize:"large"})),position:"right top",on:"hover",closeOnDocumentClick:!0,mouseLeaveDelay:400,mouseEnterDelay:0,contentStyle:{border:"none",width:200,transition:"all 1s ease-out"},arrow:!0},r.a.createElement("div",null,r.a.createElement("input",{value:l,type:"text",style:{width:100,border:"none",fontSize:"0.9em"},placeholder:"filter...",onChange:function(e){return s(e.target.value)}}),r.a.createElement("div",{className:"popupMenu"},n.map((function(e){return r.a.createElement(T.a,{key:e[0],trigger:r.a.createElement("div",{key:e[0],className:"menu-item",onClick:function(){return t(e[0])}},e[0]),position:"right top",on:"hover",mouseLeaveDelay:200,mouseEnterDelay:200,contentStyle:{border:"none",width:200},arrow:!0},r.a.createElement(T.a,{key:e[0],trigger:r.a.createElement("div",null,e[1]),position:"top center",on:"hover",mouseLeaveDelay:0,mouseEnterDelay:0,contentStyle:{border:"none",width:200},arrow:!0},e[2]))})))))},D=n(75),L=n.n(D),I=function(e){var t=e.name,n=e.value,a=e.handleDelField,o=e.handleSaveFieldChange;return r.a.createElement("div",{className:"propBox",key:t},r.a.createElement("div",{className:"propField propKey"},r.a.createElement("div",null,t)),r.a.createElement("div",{className:"propField propValue",onMouseDown:function(e){return e.stopPropagation()}},r.a.createElement(b.a,{type:"text",value:n,className:"inputField",placeholder:"Enter Value...",onChange:function(e){return o(e.target.value,t)},style:{fontSize:"0.9em"}})),r.a.createElement(L.a,{titleAccess:"Delete this field",fontSize:"large",className:"button addButton",onClick:function(){return a(t)}}))},A=function(e){var t=e.sectionName,n=e.fields,o=e.details,i=e.setDetails,c=(Object(a.useContext)(_e),function(e){i((function(t){var n=Object(l.a)({},t);return delete n[e],n}))}),s=function(e,t){i(Object(l.a)({},Object.assign(o,Object(P.a)({},t,e))))};return r.a.createElement("div",{className:"section"},r.a.createElement(B,{handleAddField:function(e){i(Object(l.a)({},Object.assign(o,Object(P.a)({},e,""))))},fields:n,secName:t}),r.a.createElement("div",{className:"sectionHeader"},t,":"),Object.keys(o).map((function(e){return r.a.createElement(I,{key:e,name:e,value:o[e],handleDelField:c,handleSaveFieldChange:s})})))},M=function(e){var t=e.flow,n=Object(a.useContext)(_e),o=Object(a.useState)(Object(l.a)({},t.details.match)),c=Object(i.a)(o,2),s=c[0],u=c[1],d=Object(a.useState)(Object(l.a)({},t.details.actions)),p=Object(i.a)(d,2),f=p[0],v=p[1],O=Object(a.useState)(t.details.priority||1),g=Object(i.a)(O,2),j=g[0],P=g[1],T={match:Object(l.a)({},s),actions:Object(l.a)({},f),priority:j},N=function(e){var a=Object(l.a)(Object(l.a)({},t),{},{details:e||T,isSynced:!0,box:Object(l.a)(Object(l.a)({},t.box),{},{flowDetailsModalOpen:!1})});n.updateFlowOnServer(t.box.id,a)};return r.a.createElement(m.a,{enableUserSelectHack:!1,defaultPosition:{x:t.box.x,y:t.box.y-100}},r.a.createElement("div",{className:"menuWindowContainer",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{style:{display:"flex",alignSelf:"flex-end"}},!1===Object(w.isEqual)(t.details,Object(l.a)(Object(l.a)({},t.details),T))&&t.isSynced?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{titleAccess:"Update changes of this flow entry on the vSwitch",className:"button",fontSize:"large",style:{position:"relative"},onClick:function(){return N()}})):null,r.a.createElement(E.a,{fontSize:"large",className:"button closeButton",onClick:function(){n.updateBoxOnUi(Object(l.a)(Object(l.a)({},t.box),{},{flowDetailsModalOpen:!1}))},titleAccess:"Close"}),t.isSynced?null:r.a.createElement(y.a,{fontSize:"large",className:"button closeButton",onClick:function(){n.addFlowToServer({flow:Object(l.a)(Object(l.a)({},t),{},{details:T}),callback:function(e){return N(e)}})},titleAccess:"Confirm new flow"})),r.a.createElement("div",{className:"header"},r.a.createElement(h.a,{defaultValue:t.box.name,inputProps:{"aria-label":"naked",style:{textAlign:"center"}},style:{fontSize:"1.4em"},onChange:function(e){return n.updateFlowName(t.box.id,e.target.value)}})),r.a.createElement("hr",{style:{width:"90%"}}),r.a.createElement("div",{className:"propsContainer"},r.a.createElement(C.a,{container:!0,justify:"center"},r.a.createElement(b.a,{type:"text",label:"priority",placeholder:"Enter Value...",value:j,onChange:function(e){return P(Number(e.target.value))},style:{fontSize:"0.9em",margin:"8px 0"}})),r.a.createElement(A,{sectionName:"match",fields:x,details:s,setDetails:u}),r.a.createElement(A,{sectionName:"actions",fields:S,details:f,setDetails:v}))))},R=n(12),U={position:"absolute",width:10,height:10,borderRadius:"50%",background:"black"},F={left:{left:0,top:"50%",transform:"translate(-50%, -50%)"},right:{left:"100%",top:"50%",transform:"translate(-50%, -50%)"},top:{left:"50%",top:0,transform:"translate(-50%, -50%)"},bottom:{left:"50%",top:"100%",transform:"translate(-50%, -50%)"}},W=function(e){var t=e.element,n=e.handler,o=e.elemPos,c=void 0===o?{x:0,y:0}:o,s=Object(a.useContext)(_e),u=Object(a.useRef)(),p=Object(a.useState)({}),f=Object(i.a)(p,2),m=f[0],b=f[1],h=Object(a.useState)(!1),v=Object(i.a)(h,2),E=v[0],O=v[1];return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("div",{className:"connectPoint",style:Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},U),F[n]),m),{},{zIndex:1}),draggable:!0,onMouseDown:function(e){return e.stopPropagation()},onDragStart:function(e){O(!0),s.setSelected(t),s.handleBoxClick(e,t),s.setActionState("Add Connections"),e.dataTransfer.setData("arrow",t.id)},onDrag:function(e){b({position:"fixed",left:e.clientX-c.x,top:e.clientY-c.y,transform:"none",opacity:0})},ref:u,onDragEnd:function(e){b({}),O(!1),s.handleSelect(null)}}),E?r.a.createElement(d.a,{start:t.id,end:u,startAnchor:n,advanced:{passProps:{divContainer:{style:{zIndex:1}}}}}):null)},V=function(e){var t=e.element,n=e.handlers,a=void 0===n?["left","right","bottom","top"]:n,o=e.elemPos,i=void 0===o?{x:0,y:0}:o;return r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(W,{handler:e,element:t,elemPos:i,key:e})})))},z=n(158),H=r.a.memo((function(e){var t=e.port,n=e.portPolarity,o=(e.lines,Object(a.useContext)(_e)),c=Object(a.useState)(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],d=o.chooseBoxBackground(t);return t.ref=Object(a.useRef)(),r.a.createElement("div",null,r.a.createElement(z.a,{interactive:!0,arrow:!0,enterDelay:800,title:Object.keys(t.port).map((function(e,n){return r.a.createElement("div",{key:e,style:{fontSize:13,marginBottom:2}},e,": ",t.port[e],r.a.createElement("br",null))}))},r.a.createElement("div",null,r.a.createElement("div",{ref:t.ref,className:"portBox hoverMarker",style:{background:d},onClick:function(e){!1===s&&o.handleBoxClick(e,t),u(!1)},id:t.id,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.dataTransfer.getData("arrow")!==t.id&&"output"===n&&o.addLine({startBoxId:e.dataTransfer.getData("arrow"),endBoxId:t.id})}},r.a.createElement(V,{element:t,handlers:"input"===n?["right"]:[]}),r.a.createElement("div",null,t.name,r.a.createElement("br",null),"(...",t.port.hw_addr.slice(-5),")",r.a.createElement("br",null),"(",t.port.port_no,")")))))})),J=r.a.memo((function(e){var t=e.ports,n=e.portPolarity,o=e.lines,i=void 0===o?[]:o;Object(a.useContext)(_e);return r.a.createElement("div",{className:"portsBarStyle",id:"portsInputsBar"},r.a.createElement("u",{className:"portTitleStyle"},n,"s"),t.map((function(e){var t=e.id+":<".concat(n,">");return r.a.createElement(H,{key:t,port:Object(l.a)(Object(l.a)({},e),{},{id:t}),portPolarity:n,lines:i})})))})),G=r.a.memo((function(e){return null})),Y=n(79),q=n.n(Y),X=n(80),Q=n.n(X),K=function(e){var t=e.flowEntry,n=(e.i,Object(a.useContext)(_e)),o=t.details,i=t.box.visible?"LemonChiffon":void 0;return r.a.createElement(z.a,{arrow:!0,enterDelay:800,title:Object.keys(o).filter((function(e){return"actions"!==e&&"match"!==e})).map((function(e){return r.a.createElement("div",{key:e,style:{fontSize:12}},e,": ",o[e])}))},r.a.createElement("div",{className:"propBoxEntryPreview grayHover",style:{background:i},onClick:function(){return n.toggleFlowVisibility(t)}},r.a.createElement("div",{style:{width:20}},t.box.name,":"),r.a.createElement("div",{style:{flex:.9}},r.a.createElement("ul",null,Object.keys(o.match).map((function(e){return r.a.createElement("li",{key:e},e,": ",o.match[e])})))),r.a.createElement("div",{style:{width:30}},"--",">"),r.a.createElement("div",{style:{flex:.9}},JSON.stringify(o.actions,null,2)),r.a.createElement(q.a,{fontSize:"large",className:"button",onClick:function(e){e.stopPropagation(),n.updateBoxOnUi(Object(l.a)(Object(l.a)({},t.box),{},{flowDetailsModalOpen:!t.box.flowDetailsModalOpen}))}}),r.a.createElement(Q.a,{fontSize:"large",className:"button",onClick:function(e){e.stopPropagation(),n.delFlow(t)}})))},Z=function(e){var t=e.setSwitchDetailsWindow,n=e.flowEntries,a=void 0===n?[]:n;return r.a.createElement(m.a,{enableUserSelectHack:!1},r.a.createElement("div",{className:"switchDetailsWindow",onClick:function(e){return e.stopPropagation()}},r.a.createElement(E.a,{fontSize:"large",className:"button closeButton",onClick:function(){return t(!1)}}),r.a.createElement("div",{className:"header"},"Flow Entries"),r.a.createElement("hr",{style:{width:"90%"}}),a.map((function(e,t){return e.isSynced?r.a.createElement(K,Object.assign({key:JSON.stringify(e.details.match)},{flowEntry:e,i:t})):null}))))},$=function(){return r.a.createElement("div",{className:"toolboxMenu"},r.a.createElement("div",{className:"toolboxTitle"},"Drag & drop me!"),r.a.createElement("hr",null),r.a.createElement("div",{className:"toolboxContainer"},Se.map((function(e){return r.a.createElement("div",{key:e,className:e+" grabble",onDragStart:function(t){return t.dataTransfer.setData("shape",e)},draggable:!0},e)}))))},ee=(n(111),n(81)),te=n.n(ee),ne={modBox:["Edit Mods","Add Connections","Remove Connections","Hide","Delete"],portBox:["Add Connections","Remove Connections"],portBoxOut:[],arrow:["Remove Connection"]};var ae=r.a.memo((function(){var e=Object(a.useContext)(_e);return r.a.createElement("div",{className:"topBarStyle",style:{height:null===e.selected?"0":"60px"},onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"topBarLabel",onClick:function(){return e.handleSelect(null)}},r.a.createElement(te.a,{fontSize:"large",className:" topBarToggleIcon"})),function(){var t=[];switch(e.selected&&(t=ne[e.selected.shape],e.selected.shape.includes("Box")&&e.selected.id.includes(":<output>")&&(t=ne.portBoxOut)),e.actionState){case"Normal":return r.a.createElement("div",{className:"actionBubblesContainer"},t.map((function(t,n){return r.a.createElement("div",{className:"actionBubble",key:n,onClick:function(){return function(t){switch(t){case"Add Connections":e.setActionState("Add Connections");break;case"Remove Connections":e.setActionState("Remove Connections");break;case"Remove Connection":e.removeSelectedLine();break;case"Edit Mods":e.openModsWindowOfSelected();break;case"Hide":e.toggleFlowVisibilityOfSelected();break;case"Delete":e.removeSelectedBox()}}(t)}},t)})));case"Add Connections":return r.a.createElement("div",{className:"actionBubblesContainer"},r.a.createElement("p",null,"To where connect new connection?"),r.a.createElement("div",{className:"actionBubble",onClick:function(){return e.setActionState("Normal")}},"finish"));case"Remove Connections":return r.a.createElement("div",{className:"actionBubblesContainer"},r.a.createElement("p",null,"Which connection to remove?"))}}())})),re=r.a.memo((function(e){var t=Object(a.useContext)(_e),n=e.boxes,o=e.box,l=Object(a.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1];o.shape||(o.shape="modBox"),o.x||(o.x=0),o.y||(o.y=0);var p=function(e,a,r){var o=Object(c.a)(n),i=n.findIndex((function(e){return e.id===r}));o[i].x=a.lastX,o[i].y=a.lastY,t.updateBoxOnUi(o[i])},f=t.chooseBoxBackground(o);if(o.ref=Object(a.useRef)(),o.ref.current){var b=o.ref.current.getBoundingClientRect(),h=b.x,v=b.y;o.clientX=h,o.clientY=v}return null==o.name&&(o.name=o.id),r.a.createElement(m.a,{bounds:"#boxesContainer",onStart:function(e){return e.stopPropagation()},onDrag:function(e,t){p(0,t,o.id)},onStop:function(e,t){return p(0,t,o.id)},position:{x:o.x,y:o.y},grid:[xe.draggingGrid[0],xe.draggingGrid[1]]},r.a.createElement("div",{ref:o.ref,className:"".concat(o.shape," hoverMarker absolute"),style:{background:f},onClick:function(e){!1===u&&t.handleBoxClick(e,o),d(!1)},id:o.id,onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(e){console.log("box on drop!"),e.dataTransfer.getData("arrow")!==o.id&&t.addLine({startBoxId:e.dataTransfer.getData("arrow"),endBoxId:o.id})}},r.a.createElement("div",null,o.name),r.a.createElement(V,{element:o,elemPos:{x:o.clientX,y:o.clientY}})))})),oe=function(e){var t=e.handleDropBox,n=e.boxes;e.lines;return r.a.createElement("div",{id:"boxesContainer",className:"boxesContainer",onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDrop:t},r.a.createElement(ae,null),n.map((function(e){return e.visible?r.a.createElement(re,Object.assign({key:e.id},{box:e,boxes:n})):null})))},ie=function(e){var t=e.url,n=e.dpid,a=e.onSuccess,r=e.onError;return function(e){var t=e.url,n=e.dpid,a=e.onSuccess,r=e.onError;return fetch(t+"/stats/portdesc/"+n).then((function(e){return e.json()})).then((function(e){a(e)}),(function(e){r&&r(e)}))}({url:t,dpid:Number(n),onSuccess:function(e){for(var t=e[n],r={ports:t,dpid:n},o=0;o<t.length;o++)"LOCAL"===t[o].port_no&&(r=Object.assign(r,{name:t[o].name}));a(r)},onError:function(e){r&&r(e)}})},ce=function(e){var t=e.url,n=e.onSuccess,a=e.onError,r={};return function(e){var t=e.url,n=e.onSuccess,a=e.onError;return fetch(t+"/stats/switches").then((function(e){return!1===e.ok?a({message:e.statusText,name:"URIError"}):e.json()})).then((function(e){n(e)}),(function(e){a&&a(e)}))}({url:t,onSuccess:function(e){var o=e.map((function(e){return ie({url:t,dpid:Number(e),onSuccess:function(t){r=Object.assign(r,Object(P.a)({},e,t))},onError:function(e){return a(e)}})}));Promise.all(o).then((function(){n(r)}))},onError:function(e){a&&a(e)}})},le=function(e){return Object.keys(e).map((function(t){return{type:t,port:Number(e[t])?Number(e[t]):e[t]}}))},se=function(e){var t=Object(l.a)({},e);for(var n in e)"string"===typeof e[n]&&(t[n]=!1===isNaN(e[n])?Number(e[n]):e[n]);return t},ue=function(e){var t=Object(l.a)({},e);for(var n in e)"number"===typeof e[n]&&(t[n]=String(e[n]));return t},de=function(e){return Object(l.a)(Object(l.a)({},e),{},{match:ue(e.match),actions:(t=e.actions,t.map((function(e){return e.split(":")})).reduce((function(e,t){return Object.assign(e,Object(P.a)({},t[0],t[1]))}),{}))});var t},pe=function(e){return Object(l.a)(Object(l.a)({},e),{},{match:se(e.match),actions:le(e.actions)})},fe=function(e){var t=e.url,n=e.dpid,a=e.flow,r=e.onSuccess,o=e.onError,i=pe(a),c=i,s=c.match,u=void 0===s?{}:s,d=c.actions,p=void 0===d?[]:d,f=c.priority,m=void 0===f?1:f;i=Object(l.a)(Object(l.a)({},i),{},{match:u,actions:p,priority:m});var b=Object(l.a)(Object(l.a)({},i),{},{dpid:Number(n)}),h={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)};fetch(t+"/stats/flowentry/add",h).then((function(e){200!==e.status?alert(e.status):r&&function(e){var t=e.url,n=e.dpid,a=e.flowMatch,r=e.onSuccess,o=e.onError,i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({match:a})};fetch(t+"/stats/flow/"+n,i).then((function(e){if(200===e.status)return e.json();alert(e.status)})).then((function(e){r(e[n].map((function(e){return de(e)})))}),(function(e){o&&o(e)}))}({url:t,dpid:n,flowMatch:{match:u},onSuccess:function(e){var t=e.find((function(e){return Object(w.isMatch)(e,a)&&Object(w.isEqual)(e.match,a.match)}));r(t)},onError:function(e){return o(e)}})}),(function(e){return o(e)}))},me=n(153),be=n(154),he=function(e){var t=e.fetchFailed;return r.a.createElement("div",null,r.a.createElement("h2",null," Fetch Request Failed "),r.a.createElement("h3",null,t.stack))},ve=n(82),Ee=n.n(ve),Oe=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Loading..."),r.a.createElement(Ee.a,{size:150,color:"#123abc",loading:!0}))},ye=Object(me.a)((function(){return{mainWindow:{display:"flex",flexDirection:"column",width:"var(--canvasWidthVw)",minHeight:"var(--canvasHeightVh)",background:"white",color:"black",borderRadius:"100px",justifyContent:"center",alignItems:"center",padding:"50px",margin:"30px 0"},innerContent:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flexWrap:"wrap"}}})),ge=function(e){var t=e.children,n=e.fetchFailed,a=e.isLoading,o=ye(),i=t;return n?i=r.a.createElement(he,{fetchFailed:n}):a&&!0===a&&(i=r.a.createElement(Oe,null)),r.a.createElement("div",{className:o.mainWindow},r.a.createElement(be.a,{in:!0,timeout:600,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:o.innerContent},i)),r.a.createElement("div",{style:{marginTop:30}}))},_e=Object(a.createContext)(null),xe={draggingGrid:[1,1]},Se=["modBox"],we=function(e){var t=e.ofctlRestUrl,n=Object(R.g)().dpid,o=Number(n),s=Object(a.useState)({flowEntries:[],ports:[],name:"",dpid:o}),d=Object(i.a)(s,2),f=d[0],m=d[1],b=Object(a.useState)([]),h=Object(i.a)(b,2),v=h[0],E=h[1],O=Object(a.useState)(!1),y=Object(i.a)(O,2),g=y[0],_=y[1],x=Object(a.useState)(!0),S=Object(i.a)(x,2),C=S[0],P=S[1],T=Object(a.useState)(null),N=Object(i.a)(T,2),k=N[0],B=N[1];Object(a.useEffect)((function(){D(t).then((function(){P(!1),L(t)}))}),[]);var D=function(e){return ie({dpid:o,url:e,onSuccess:function(e){m(Object.assign(f,e)),E(I(e.ports))},onError:function(e){return B(e)}})},L=function(e){return function(e){var t=e.dpid,n=e.url,a=e.onSuccess,r=e.onError;return fetch(n+"/stats/flow/"+t).then((function(e){return 200!==e.status&&alert(e.status),e.json()})).then((function(e){a(e[t].map((function(e){return de(e)})))}),(function(e){r&&r(e)}))}({dpid:o,url:e,onSuccess:function(e){document.getElementById("boxesContainer").getBoundingClientRect();m((function(t){var n=Object(l.a)({},t);return n.flowEntries=A(e),n}))}})},I=function(e){return e.map((function(e){return{shape:"portBox",id:e.port_no,name:e.name,port:e,ref:null}}))},A=function(e){var t=document.getElementById("boxesContainer").getBoundingClientRect();return e.map((function(e,n){return{details:e,visible:!1,isSynced:!0,box:{x:t.width*(.2+.8*Math.random()),y:t.height*(.2+.8*Math.random()),visible:!1,id:JSON.stringify(e.match),name:"flow"+n}}}))},U=Object(a.useCallback)((function(e){e.box.visible=!e.box.visible,se(e)}),[f]),F=function(){U(f.flowEntries.find((function(e){return e.box.id===X.id})))},W=Object(a.useState)([]),V=Object(i.a)(W,2),z=V[0],H=V[1],Y=Object(a.useState)(null),q=Object(i.a)(Y,2),X=q[0],Q=q[1],K=Object(a.useState)("Normal"),ee=Object(i.a)(K,2),te=ee[0],ne=ee[1],ae=Object(a.useCallback)((function(e,t){null===e?(Q(null),ne("Normal")):Q(t)}),[]),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?Object.values(e.flowEntries).map((function(e){return e.box})):Object.values(f.flowEntries).map((function(e){return e.box}))},ce=function(e){m((function(t){var n=Object(l.a)({},t);return n.flowEntries.find((function(t){return t.box.id===e.id})).box=e,n}))},se=function(e){m((function(t){var n=Object(l.a)({},t),a=n.flowEntries.findIndex((function(t){return t.box.id===e.box.id}));return n.flowEntries[a]=Object(l.a)({},e),n}))},ue=function(e,t){var n=f.flowEntries.find((function(t){return t.box.id===e}));n.box.name=t,se(n)},pe=Object(a.useCallback)((function(e){return[].concat(Object(c.a)(re()),Object(c.a)(v)).map((function(e){return e.id})).includes(e)}),[f,v]),me=Object(a.useCallback)((function(e,t,n){e-=e%xe.draggingGrid[0],t-=t%xe.draggingGrid[1];for(var a=re().length;pe("box"+a);)a++;for(var r=prompt("Enter box name: ","box"+a);pe(r);)r=prompt("name taken,choose other: ");if(r){var o={isSynced:!1,details:{},box:{id:r,x:e,y:t,shape:n,flowDetailsModalOpen:!0,visible:!0}};m((function(e){var t=Object(l.a)({},e);return t.flowEntries=t.flowEntries.concat(o),t}))}}),[f.flowEntries.length,JSON.stringify(re().map((function(e){return e.flowDetailsModalOpen})))]),be=Object(a.useCallback)((function(e){var t=e.dataTransfer.getData("shape");if(Se.includes(t)){var n=e.target.getBoundingClientRect(),a=n.x,r=n.y;a=e.clientX-a,r=e.clientY-r,me(a,r,t)}}),[re().length,JSON.stringify(re().map((function(e){return e.flowDetailsModalOpen}))),X,me]),he=Object(a.useCallback)((function(e,t){e.stopPropagation(),"Normal"===te?ae(e,t):"Add Connections"!==te||X.id===t.id||t.id.includes(":<input>")?"Remove Connections"===te&&H((function(e){return e.filter((function(e){return!(e.start===X.id&&e.end===t.id)}))})):ye(t)}),[te,X]),ve=Object(a.useCallback)((function(e){var t=null;return X&&X.id===e.id?t="rgb(200, 200, 200)":("Add Connections"===te&&0===z.filter((function(t){return t.start===X.id&&t.end===e.id})).length&&!e.id.includes(":<input>")||"Remove Connections"===te&&z.filter((function(t){return t.start===X.id&&t.end===e.id})).length>0)&&(t="LemonChiffon"),t}),[te,X]),Ee=Object(a.useCallback)((function(e){var t=e.startBoxId,n=e.endBoxId,a=f.flowEntries.find((function(e){return e.box.id===t})),r=f.flowEntries.find((function(e){return e.box.id===n}));a&&(a.details.actions.OUTPUT=n.replace(":<output>",""),Be(a.box.id,a)),r&&(r.details.match.in_port=t.replace(":<input>",""),Be(r.box.id,r))}),[f,X]),Oe=Object(a.useCallback)((function(){Ne(f.flowEntries.find((function(e){return e.box.id===X.id})))}),[f,X]),ye=Object(a.useCallback)((function(e){Ee({startBoxId:X.id,endBoxId:e.id})}),[z.length,X]),we=function(e){var t=f.flowEntries.find((function(t){return t.box.id===e.start})),n=f.flowEntries.find((function(t){return t.box.id===e.end}));t&&(delete t.details.actions.OUTPUT,Be(t.box.id,Object(l.a)({},t))),n&&(delete n.details.match.in_port,Be(n.box.id,Object(l.a)({},n)))},je=Object(a.useCallback)((function(){we(X.id)}),[f,X]),Ce=Object(a.useCallback)((function(){m((function(e){var t=Object(l.a)({},e);return re().find((function(e){return e.id===X.id})).flowDetailsModalOpen=!0,t}))}),[X]),Pe=function(e){var t;t=e.box.id,z.filter((function(e){return!(e.start===t||e.end===t)})).forEach((function(e){return we({start:e.start,end:e.end})})),m((function(t){var n=Object(l.a)({},t);return n.flowEntries=n.flowEntries.filter((function(t){return!j.a.isEqual(t,e)})),n})),ae(null)},Te=function(e,n){!function(e){var t=e.url,n=e.dpid,a=e.flow,r=e.onSuccess,o=e.onError,i=le(a.actions),c=Object(l.a)(Object(l.a)({},a),{},{dpid:n,actions:i}),s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};fetch(t+"/stats/flowentry/delete_strict",s).then((function(e){200!==e.status&&o(e.statusText),r&&r()}),(function(e){o&&o(e)}))}({url:t,flow:e.details,dpid:o,onSuccess:function(){return n()}})},Ne=Object(a.useCallback)((function(e){if(!1!==window.confirm("are you sure you want to delete ".concat(e.box.name,"?")))return!1===e.isSynced?Pe(e):void Te(e,(function(){return Pe(e)}))}),[f]),ke=Object(a.useCallback)((function(e){var n,a=e.flow,r=e.callback,i=e.checkExistence,c=void 0===i||i,s=a.details.match;if(c){var u=(n=void 0===s?{}:s,f.flowEntries.find((function(e){return JSON.stringify(e.details.match)===JSON.stringify(n)})));if(u)return void alert("the flow "+u.box.name+" with the same match rule already exist.\nFlows with same match rules are not allowed.")}fe({url:t,dpid:o,flow:a.details,onSuccess:function(e){var t=Object(l.a)(Object(l.a)({},a),{},{details:e,isSynced:!0});se(t),r&&r(t.details)},onError:function(e){return alert(e)}})}),[f]),Be=function(e,t,n){var a=f.flowEntries.find((function(t){return t.box.id===e}));Object(w.isEqual)(a.details,t.details)||Te(a,(function(){return ke({flow:t,callback:n,checkExistence:!1})}))},De=Object(a.useMemo)((function(){return{updateBoxOnUi:ce,setLines:H,selected:X,setSelected:Q,actionState:te,setActionState:ne,handleBoxClick:he,chooseBoxBackground:ve,addBox:me,addLine:Ee,removeSelectedBox:Oe,addLineToSelectedBox:ye,removeSelectedLine:je,openModsWindowOfSelected:Ce,handleSelect:ae,toggleFlowVisibility:U,toggleFlowVisibilityOfSelected:F,delFlow:Ne,addFlowToServer:ke,updateFlowOnUi:se,updateFlowOnServer:Be,updateFlowName:ue}}),[ce,H,X,Q,te,ne,he,ve,me,Ee,Oe,ye,je,Ce,ae,U,F,Ne,se,ke,Be,ue]);return!0===C||k?r.a.createElement(ge,{isLoading:C,fetchFailed:k}):r.a.createElement("div",null,r.a.createElement("div",{className:"canvasStyle",id:"canvas",onClick:function(){return ae(null)}},r.a.createElement(_e.Provider,{value:De},r.a.createElement(G,{canvasProps:De}),r.a.createElement("div",{className:"switchTopBar"},r.a.createElement("div",{className:"switchTitle"},f.name),r.a.createElement(u.a,{fontSize:"large",className:"infoButton",onClick:function(){return _(!g)}})),r.a.createElement("div",{className:"innerCanvas"},r.a.createElement($,null),r.a.createElement(J,{ports:v,portPolarity:"input",lines:z}),r.a.createElement(oe,{boxes:re(),handleDropBox:be,lines:z}),r.a.createElement(J,{ports:v,portPolarity:"output"}),f.flowEntries.map((function(e){return e.box.visible?r.a.createElement(r.a.Fragment,{key:e.box.id},e.details.match&&e.details.match.in_port?r.a.createElement(p,{line:{start:e.details.match.in_port+":<input>",end:e.box.id}}):null,!e.details.actions||!1!==isNaN(e.details.actions.OUTPUT)&&"LOCAL"!==e.details.actions.OUTPUT?null:r.a.createElement(p,{line:{start:e.box.id,end:e.details.actions.OUTPUT+":<output>"}})):null})),f.flowEntries.map((function(e){return e.box.flowDetailsModalOpen?r.a.createElement(M,Object.assign({key:e.box.id},{flow:e})):null}))),g?r.a.createElement(Z,{setSwitchDetailsWindow:_,flowEntries:f.flowEntries}):null)))},je=(n(117),n(42)),Ce=function(e){var t=e.url,n=Object(a.useState)({}),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(a.useState)(null),u=Object(i.a)(s,2),d=u[0],p=u[1],f=Object(a.useState)(!0),m=Object(i.a)(f,2),b=m[0],h=m[1];return Object(a.useEffect)((function(){ce({url:t,onSuccess:function(e){l(e),h(!1)},onError:function(e){throw p(e),e}})}),[]),r.a.createElement(ge,{fetchFailed:d,isLoading:b},r.a.createElement("div",{className:"switchListTitle"},Object.keys(c).length>0?"Detected vSwitches:":"No Detected vSwitches."),Object.keys(c).map((function(e){var t=c[e],n=t.ports,a=t.name;return r.a.createElement(je.b,{to:"/switch/"+e,key:e,className:"switchList"},"".concat(a," (dpid=").concat(e," ports=").concat(n.map((function(e){return e.name})).toString(),")"))})))},Pe=n(155),Te=n(157),Ne=Object(me.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(2),width:"40ch"},direction:"ltr",display:"flex",flexDirection:"column",alignItems:"center"},loginButton:{margin:e.spacing(2)},linkDiv:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:50},link:{"&:hover":{color:"#f00"}}}})),ke=function(e){var t=e.ofctlRestUrl,n=e.setOfctlRestUrl,o=(e.setSwitches,Object(R.f)()),c=Ne(),l=Object(a.useState)(t),s=Object(i.a)(l,2),u=s[0],d=s[1];return r.a.createElement(ge,null,r.a.createElement("p",null,"Please Provide controller REST API URL:"),r.a.createElement("form",{className:c.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),n(u),o.push("/switches")}},r.a.createElement(b.a,{label:"controller REST API URL",variant:"outlined",value:u,onChange:function(e){return d(e.target.value)}}),r.a.createElement(Te.a,{className:c.loginButton,variant:"outlined",type:"submit",color:"primary"},"Connect")),r.a.createElement("div",{className:c.linkDiv}))},Be=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("http://localhost:9089/http://localhost:8080"),l=Object(i.a)(c,2),s=l[0],u=l[1];return r.a.createElement(Pe.a,{maxWidth:"lg"},r.a.createElement("header",{className:"mainTitle"},"SDN Manager"),r.a.createElement("hr",null),r.a.createElement(je.a,null,r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/switches"},r.a.createElement(Ce,{url:s})),r.a.createElement(R.a,{path:"/switch/:dpid"},r.a.createElement(we,{switches:n,ofctlRestUrl:s})),r.a.createElement(R.a,{exact:!0,path:"/"},r.a.createElement(ke,{ofctlRestUrl:s,setOfctlRestUrl:u,setSwitches:o})),r.a.createElement(R.a,{path:"*"},r.a.createElement(ge,null,r.a.createElement("h3",null,"404 Not Found"))))))},De=document.getElementById("root");Object(o.render)(a.createElement(Be,null),De)},94:function(e,t,n){e.exports=n(118)},99:function(e,t,n){}},[[94,1,2]]]);
//# sourceMappingURL=main.3c9086d5.chunk.js.map